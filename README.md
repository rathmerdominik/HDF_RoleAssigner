# HFB Role Assigner

A module for the [Hammerbot Discord Framework](https://github.com/rathmerdominik/HammerBot) that generates good looking  descriptive messages based on a config file with limitless messages support and up to 25 entries per message.  

Also features role assignment based on reactions with possibility to also have it remove roles on double click.
## Installation

You will need to clone [Hammerbot Discord Framework](https://github.com/rathmerdominik/HammerBot) and then clone this repository into `hammerbot/modules`.  
After that you wil have to change the folder name to role_assigner to match HBF's convention.


It is also important that you create a `config.toml` file out of the `config.dist.toml` file.  


Here is a commandblock that basically does all of these steps. Please change as needed:

```
git clone https://github.com/rathmerdominik/HammerBot
cd HammerBot/hammerbot/modules
git clone https://github.com/rathmerdominik/HDF_RoleAssigner role_assigner
cd role_assigner
cp config.dist.toml config.toml
```

## Configuration
Configuring this application is easily possible through the provided toml file:

```
guild_id = 0                   # The guild id of the guild the module is supposed to manage
remove_role_when_owned = false # Remove the role if the user clicks again on the reaction and already has the associated role

[messages]

[messages.test] # Name to use for the Message. Name behind the dot will be title of the Embed

channel_id = 0   # The Channel ID where to put in the specific message 
message_id = 0   # The message id of the message to keep watch and edit for role assignment. Leave empty for automatic generation
title_url = ""   # Assigns a URL to the title
description = "" # The description of the generated embed. Can be empty
color = "FFFFFF" # The color for the embed color strip in hexadecimal. Can be empty
thumbnail = ""   # URL to an image or you can place an image in the "assets" folder of this module and use its file name with extension (e.g "icon.png"). Can be empty

[messages.test.author]
name = "" # Name of the author for the generated embed. Can be empty, but required for author icon and url
icon = "" # URL to an image or you can place an image in the "assets" folder of this module and use its file name with extension. Can be empty
url = ""  # URL to open when clicked on. Could be a website or anything. Can be empty

[messages.test.footer]
text = ""     # The footer of the generated embed. Can be empty but needed for footer icon_url
icon_url = "" # URL to an image or you can place an image in the "assets" folder of this module and use its file name with extension (e.g "icon.png"). Can be empty

[messages.test.entries]

[messages.test.entries.example_entry]
#You can add extra entries here. They will all be seperate entries in the generated embed

role_id = 0      # Role ID to use. Leave unchanged if you enabled create_roles and want it to be autogenerated
emoji_id = 0     # Emoji ID to use for Role Assignment. Can be int or unicode characters 
description = "" # Description for the role. Optional
```

You can have multiple messages and multiple entries in those messages.  
The syntax is basically boils down to `messages.<MESSAGE_NAME>.entries.<ENTRY_NAME>`.

## Other usage

You might have noticed that you can leave a lot of values empty. This is because you can also not use the provided reaction functionality and e.g use the message as a welcome

## Limitations
As we use discord we are bound to several restrictions. In this case these are the common embed restrictions:


- Embed title is limited to 256 characters
- Embed description is limited to 4096 characters
- An embed can contain a maximum of 25 fields
- A field name/title is limited to 256 character and the value of the field is limited to 1024 characters
- Embed footer is limited to 2048 characters
- Embed author name is limited to 256 characters
- The total of characters allowed in an embed is 6000

So if your message shows incorrect behaviour please make sure that you operate within these limitations
